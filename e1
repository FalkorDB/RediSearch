# RediSearch root: /home/avital/repositories/RediSearch-cxx
# RediSearch binroot: /home/avital/repositories/RediSearch-cxx/bin/linux-x64-release
-- Configuring done
-- Generating done
-- Build files have been written to: /home/avital/repositories/RediSearch-cxx/bin/linux-x64-release/search
Building /home/avital/repositories/RediSearch-cxx/bin/linux-x64-release/search/redisearch.so ...
[ 42%] Building CXX object CMakeFiles/rscore.dir/src/spec.o
In file included from /home/avital/repositories/RediSearch-cxx/src/doc_table.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/redisearch.h:363:3: error: ‘RSIndexStats’ does not name a type
  363 |   RSIndexStats indexStats;
      |   ^~~~~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/sortable.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/doc_table.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/value.h:349:46: error: call of overloaded ‘RSValue(RSValueType)’ is ambiguous
  349 | #define RSVALUE_STATICALLOC_INIT(T) RSValue(T)
      |                                              ^
/home/avital/repositories/RediSearch-cxx/src/value.h:355:56: note: in expansion of macro ‘RSVALUE_STATICALLOC_INIT’
  355 | static RSValue __attribute__((unused)) RS_StaticNull = RSVALUE_STATICALLOC_INIT(RSValue_Null);
      |                                                        ^~~~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/value.h:103:3: note: candidate: ‘RSValue::RSValue(RSValueType, uint32_t, uint8_t)’
  103 |   RSValue(RSValueType t_ = RSValue_Undef, uint32_t refcount = 0, uint8_t allocated = 0) :
      |   ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/value.h:96:3: note: candidate: ‘RSValue::RSValue(RSValueType)’
   96 |   RSValue(RSValueType t);
      |   ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/value.h:70:8: note: candidate: ‘constexpr RSValue::RSValue(const RSValue&)’
   70 | struct RSValue : Object {
      |        ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/value.h:349:46: error: call of overloaded ‘RSValue(RSValueType)’ is ambiguous
  349 | #define RSVALUE_STATICALLOC_INIT(T) RSValue(T)
      |                                              ^
/home/avital/repositories/RediSearch-cxx/src/value.h:356:57: note: in expansion of macro ‘RSVALUE_STATICALLOC_INIT’
  356 | static RSValue __attribute__((unused)) RS_StaticUndef = RSVALUE_STATICALLOC_INIT(RSValue_Undef);
      |                                                         ^~~~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/value.h:103:3: note: candidate: ‘RSValue::RSValue(RSValueType, uint32_t, uint8_t)’
  103 |   RSValue(RSValueType t_ = RSValue_Undef, uint32_t refcount = 0, uint8_t allocated = 0) :
      |   ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/value.h:96:3: note: candidate: ‘RSValue::RSValue(RSValueType)’
   96 |   RSValue(RSValueType t);
      |   ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/value.h:70:8: note: candidate: ‘constexpr RSValue::RSValue(const RSValue&)’
   70 | struct RSValue : Object {
      |        ^~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h: In constructor ‘DocTable::DocTable(size_t)’:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:36: error: ‘RSGlobalConfig’ was not declared in this scope
   88 |   DocTable(size_t cap) { ctor(cap, RSGlobalConfig.maxDocTableSize); }
      |                                    ^~~~~~~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/trie.h: At global scope:
/home/avital/repositories/RediSearch-cxx/src/trie/trie.h:97:3: error: ‘TrieIterator’ does not name a type; did you mean ‘TrieMapIterator’?
   97 |   TrieIterator *Iterate(StepFilter f, StackPopCallback pf, void *ctx_);
      |   ^~~~~~~~~~~~
      |   TrieMapIterator
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/sparse_vector.h:20:19: error: expected unqualified-id before ‘sizeof’
   20 |     static size_t sizeof(size_t cap_);
      |                   ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h: In constructor ‘Vector<T>::Vector(size_t, size_t)’:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:22:22: error: ‘cap_’ was not declared in this scope; did you mean ‘cap’?
   22 |     data = rm_calloc(cap_, T);
      |                      ^~~~
      |                      cap
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:22:29: error: expected primary-expression before ‘)’ token
   22 |     data = rm_calloc(cap_, T);
      |                             ^
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h: In member function ‘bool Vector<T>::Get(size_t, T*)’:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:46:31: error: a function-definition is not allowed here before ‘{’ token
   46 |   virtual bool Pop(void *ptr) {
      |                               ^
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h: At global scope:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:117:20: error: template placeholder type ‘Vector<...auto...>’ must be followed by a simple declarator-id
  117 | void Vector_FreeEx(Vector *v, void (*freeCB)(void *));
      |                    ^~~~~~
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:13:8: note: ‘template<class T> struct Vector’ declared here
   13 | struct Vector : public Object {
      |        ^~~~~~
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:117:29: error: expected ‘)’ before ‘,’ token
  117 | void Vector_FreeEx(Vector *v, void (*freeCB)(void *));
      |                   ~         ^
      |                             )
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:117:31: error: expected unqualified-id before ‘void’
  117 | void Vector_FreeEx(Vector *v, void (*freeCB)(void *));
      |                               ^~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:49:53: error: template placeholder type ‘Vector<...auto...>’ must be followed by a simple declarator-id
   49 | void dfa_build(dfaNode *parent, SparseAutomaton *a, Vector *cache);
      |                                                     ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:13:8: note: ‘template<class T> struct Vector’ declared here
   13 | struct Vector : public Object {
      |        ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:70:5: error: template placeholder type ‘Vector<...auto...>’ must be followed by a simple declarator-id
   70 |     Vector *cache;
      |     ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:13:8: note: ‘template<class T> struct Vector’ declared here
   13 | struct Vector : public Object {
      |        ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:72:5: error: template placeholder type ‘Vector<...auto...>’ must be followed by a simple declarator-id
   72 |     Vector *stack;
      |     ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:13:8: note: ‘template<class T> struct Vector’ declared here
   13 | struct Vector : public Object {
      |        ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:74:5: error: template placeholder type ‘Vector<...auto...>’ must be followed by a simple declarator-id
   74 |     Vector *distStack;
      |     ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:13:8: note: ‘template<class T> struct Vector’ declared here
   13 | struct Vector : public Object {
      |        ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:27:11: error: deduced class type ‘Vector’ in function return type
   27 |   Vector *Search(const char *s, size_t len, size_t num, int maxDist, int prefixMode, int trim, int optimize);
      |           ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/trie/levenshtein.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/deps/rmutil/vector.h:13:8: note: ‘template<class T> struct Vector’ declared here
   13 | struct Vector : public Object {
      |        ^~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/trie/trie_type.h:41:21: error: expected ‘;’ at end of member declaration
   41 |   ~TrieSearchResult()
      |                     ^
      |                      ;
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h:224:14: error: ‘name’ is not a type
  224 |   void Parse(name, argv, argc, status);
      |              ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:224:20: error: ‘argv’ has not been declared
  224 |   void Parse(name, argv, argc, status);
      |                    ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:224:26: error: ‘argc’ has not been declared
  224 |   void Parse(name, argv, argc, status);
      |                          ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:224:32: error: ‘status’ has not been declared
  224 |   void Parse(name, argv, argc, status);
      |                                ^~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:225:23: error: ‘ctx’ has not been declared
  225 |   void ParseRedisArgs(ctx, name, argv, argc, status);
      |                       ^~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:225:28: error: ‘name’ is not a type
  225 |   void ParseRedisArgs(ctx, name, argv, argc, status);
      |                            ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:225:34: error: ‘argv’ has not been declared
  225 |   void ParseRedisArgs(ctx, name, argv, argc, status);
      |                                  ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:225:40: error: ‘argc’ has not been declared
  225 |   void ParseRedisArgs(ctx, name, argv, argc, status);
      |                                        ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:225:46: error: ‘status’ has not been declared
  225 |   void ParseRedisArgs(ctx, name, argv, argc, status);
      |                                              ^~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h: In constructor ‘IndexSpec::IndexSpec(const char*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.h:227:31: error: no matching function for call to ‘DocTable::DocTable()’
  227 |   IndexSpec(const char *name) {
      |                               ^
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note: candidate: ‘DocTable::DocTable(size_t)’
   88 |   DocTable(size_t cap) { ctor(cap, RSGlobalConfig.maxDocTableSize); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note:   candidate expects 1 argument, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note: candidate: ‘DocTable::DocTable(size_t, size_t)’
   87 |   DocTable(size_t cap, size_t max_size) { ctor(cap, max_size); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note:   candidate expects 2 arguments, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note: candidate: ‘constexpr DocTable::DocTable(const DocTable&)’
   63 | struct DocTable : Object {
      |        ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note:   candidate expects 1 argument, 0 provided
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h: In constructor ‘IndexSpec::IndexSpec(RedisModuleCtx*, const char*, int)’:
/home/avital/repositories/RediSearch-cxx/src/spec.h:230:67: error: no matching function for call to ‘DocTable::DocTable()’
  230 |   IndexSpec(RedisModuleCtx *ctx, const char *name, int openWrite) {
      |                                                                   ^
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note: candidate: ‘DocTable::DocTable(size_t)’
   88 |   DocTable(size_t cap) { ctor(cap, RSGlobalConfig.maxDocTableSize); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note:   candidate expects 1 argument, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note: candidate: ‘DocTable::DocTable(size_t, size_t)’
   87 |   DocTable(size_t cap, size_t max_size) { ctor(cap, max_size); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note:   candidate expects 2 arguments, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note: candidate: ‘constexpr DocTable::DocTable(const DocTable&)’
   63 | struct DocTable : Object {
      |        ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note:   candidate expects 1 argument, 0 provided
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h: In constructor ‘IndexSpec::IndexSpec(RedisModuleCtx*, IndexLoadOptions*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.h:233:61: error: no matching function for call to ‘DocTable::DocTable()’
  233 |   IndexSpec(RedisModuleCtx *ctx, IndexLoadOptions *options) {
      |                                                             ^
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note: candidate: ‘DocTable::DocTable(size_t)’
   88 |   DocTable(size_t cap) { ctor(cap, RSGlobalConfig.maxDocTableSize); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note:   candidate expects 1 argument, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note: candidate: ‘DocTable::DocTable(size_t, size_t)’
   87 |   DocTable(size_t cap, size_t max_size) { ctor(cap, max_size); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note:   candidate expects 2 arguments, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note: candidate: ‘constexpr DocTable::DocTable(const DocTable&)’
   63 | struct DocTable : Object {
      |        ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note:   candidate expects 1 argument, 0 provided
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h: In constructor ‘IndexSpec::IndexSpec(const char*, const char**, int, QueryError*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.h:236:80: error: no matching function for call to ‘DocTable::DocTable()’
  236 |   IndexSpec(const char *name, const char **argv, int argc, QueryError *status) {
      |                                                                                ^
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note: candidate: ‘DocTable::DocTable(size_t)’
   88 |   DocTable(size_t cap) { ctor(cap, RSGlobalConfig.maxDocTableSize); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note:   candidate expects 1 argument, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note: candidate: ‘DocTable::DocTable(size_t, size_t)’
   87 |   DocTable(size_t cap, size_t max_size) { ctor(cap, max_size); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note:   candidate expects 2 arguments, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note: candidate: ‘constexpr DocTable::DocTable(const DocTable&)’
   63 | struct DocTable : Object {
      |        ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note:   candidate expects 1 argument, 0 provided
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h: In constructor ‘IndexSpec::IndexSpec(RedisModuleCtx*, RedisModuleString*, RedisModuleString**, int, QueryError*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.h:240:43: error: no matching function for call to ‘DocTable::DocTable()’
  240 |             int argc, QueryError *status) {
      |                                           ^
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note: candidate: ‘DocTable::DocTable(size_t)’
   88 |   DocTable(size_t cap) { ctor(cap, RSGlobalConfig.maxDocTableSize); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note:   candidate expects 1 argument, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note: candidate: ‘DocTable::DocTable(size_t, size_t)’
   87 |   DocTable(size_t cap, size_t max_size) { ctor(cap, max_size); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note:   candidate expects 2 arguments, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note: candidate: ‘constexpr DocTable::DocTable(const DocTable&)’
   63 | struct DocTable : Object {
      |        ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note:   candidate expects 1 argument, 0 provided
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h: At global scope:
/home/avital/repositories/RediSearch-cxx/src/spec.h:351:12: error: expected unqualified-id before ‘new’
  351 | IndexSpec *new IndexSpec(RedisModuleCtx *ctx, IndexLoadOptions *options);
      |            ^~~
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:10:
/home/avital/repositories/RediSearch-cxx/src/config.h:90:24: error: ‘RSConfigOptions’ does not name a type; did you mean ‘RSIndexOptions’?
   90 |   void DumpProto(const RSConfigOptions *options, const char *name,
      |                        ^~~~~~~~~~~~~~~
      |                        RSIndexOptions
/home/avital/repositories/RediSearch-cxx/src/config.h:93:17: error: ‘RSConfigOptions’ has not been declared
   93 |   int SetOption(RSConfigOptions *options, const char *name, RedisModuleString **argv,
      |                 ^~~~~~~~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/cursor.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:11:
/home/avital/repositories/RediSearch-cxx/src/util/array.h:27:41: error: expected ‘;’ at end of member declaration
   27 |   void ctor(ArrayAllocatorType allocType)
      |                                         ^
      |                                          ;
/home/avital/repositories/RediSearch-cxx/src/util/array.h:41:22: error: ‘ix’ has not been declared
   41 |   T ARRAY_GETITEM_AS(ix) (data + ix)
      |                      ^~
/home/avital/repositories/RediSearch-cxx/src/util/array.h:41:27: error: ‘data’ is not a type
   41 |   T ARRAY_GETITEM_AS(ix) (data + ix)
      |                           ^~~~
/home/avital/repositories/RediSearch-cxx/src/util/array.h:41:32: error: expected ‘,’ or ‘...’ before ‘+’ token
   41 |   T ARRAY_GETITEM_AS(ix) (data + ix)
      |                                ^
/home/avital/repositories/RediSearch-cxx/src/util/array.h:41:3: error: ‘ARRAY_GETITEM_AS’ declared as function returning a function
   41 |   T ARRAY_GETITEM_AS(ix) (data + ix)
      |   ^
/home/avital/repositories/RediSearch-cxx/src/util/array.h:41:36: error: expected ‘;’ at end of member declaration
   41 |   T ARRAY_GETITEM_AS(ix) (data + ix)
      |                                    ^
      |                                     ;
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:11:
/home/avital/repositories/RediSearch-cxx/src/cursor.h:86:3: error: invalid use of template-name ‘Array’ without an argument list
   86 |   Array idle;
      |   ^~~~~
/home/avital/repositories/RediSearch-cxx/src/cursor.h:115:29: error: ‘khiter_t’ has not been declared
  115 |   void Free(Cursor *cursor, khiter_t khi);
      |                             ^~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/tag_index.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:12:
/home/avital/repositories/RediSearch-cxx/src/document.h:73:27: error: ‘RSAddDocumentCtx’ has not been declared
   73 |   static int AddToIndexes(RSAddDocumentCtx *aCtx);
      |                           ^~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/document.h:165:34: error: expected class-name before ‘{’ token
  165 | struct AddDocumentPool : MemPool {
      |                                  ^
/home/avital/repositories/RediSearch-cxx/src/document.h:170:40: error: expected template-name before ‘<’ token
  170 | struct RSAddDocumentCtx : MemPoolObject<AddDocumentPool> {
      |                                        ^
/home/avital/repositories/RediSearch-cxx/src/document.h:170:40: error: expected ‘{’ before ‘<’ token
/home/avital/repositories/RediSearch-cxx/src/document.h:170:40: error: expected unqualified-id before ‘<’ token
In file included from /home/avital/repositories/RediSearch-cxx/src/index_result.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/geo_index.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/tag_index.h:8,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:12:
/home/avital/repositories/RediSearch-cxx/src/forward_index.h:52:3: error: ‘ForwardIndexIterator’ does not name a type; did you mean ‘ForwardIndexEntry’?
   52 |   ForwardIndexIterator Iterate();
      |   ^~~~~~~~~~~~~~~~~~~~
      |   ForwardIndexEntry
/home/avital/repositories/RediSearch-cxx/src/forward_index.h:66:3: error: ‘khIdxEntry’ does not name a type
   66 |   khIdxEntry *makeEntry(const char *s, size_t n, uint32_t h, int *isNew);
      |   ^~~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/geo_index.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/tag_index.h:8,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:12:
/home/avital/repositories/RediSearch-cxx/src/index_result.h:50:3: error: ‘RSAggregateOffsetIterator’ does not name a type; did you mean ‘RSByteOffsetIterator’?
   50 |   RSAggregateOffsetIterator IterateOffsets() const;
      |   ^~~~~~~~~~~~~~~~~~~~~~~~~
      |   RSByteOffsetIterator
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:14:
/home/avital/repositories/RediSearch-cxx/src/indexer.h: In member function ‘bool DocumentIndexer::ShouldStop() const’:
/home/avital/repositories/RediSearch-cxx/src/indexer.h:61:46: error: ‘INDEXER_STOPPED’ was not declared in this scope
   61 |   bool ShouldStop() const { return options & INDEXER_STOPPED; }
      |                                              ^~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/indexer.h:61:46: note: the macro ‘INDEXER_STOPPED’ had not yet been defined
/home/avital/repositories/RediSearch-cxx/src/indexer.h:76: note: it was later defined here
   76 | #define INDEXER_STOPPED 0x02
      | 
/home/avital/repositories/RediSearch-cxx/src/spec.c: At global scope:
/home/avital/repositories/RediSearch-cxx/src/spec.c:29:18: error: no declaration matches ‘const FieldSpec* FieldSpec::getFieldCommon(const char*, size_t, int) const’
   29 | const FieldSpec *FieldSpec::getFieldCommon(const char *name, size_t len, int useCase) const {
      |                  ^~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:29:18: note: no functions named ‘const FieldSpec* FieldSpec::getFieldCommon(const char*, size_t, int) const’
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:12,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/field_spec.h:77:8: note: ‘struct FieldSpec’ defined here
   77 | struct FieldSpec {
      |        ^~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:149:6: error: no declaration matches ‘void IndexSpec::ParseRedisArgs(RedisModuleCtx*, RedisModuleString*, RedisModuleString**, int, QueryError*)’
  149 | void IndexSpec::ParseRedisArgs(RedisModuleCtx *ctx, RedisModuleString *name,
      |      ^~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h:225:8: note: candidate is: ‘void IndexSpec::ParseRedisArgs(int, int, int, int, int)’
  225 |   void ParseRedisArgs(ctx, name, argv, argc, status);
      |        ^~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:187:8: note: ‘struct IndexSpec’ defined here
  187 | struct IndexSpec {
      |        ^~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In constructor ‘IndexSpec::IndexSpec(RedisModuleCtx*, RedisModuleString**, int, QueryError*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:194:40: error: no matching function for call to ‘DocTable::DocTable()’
  194 |                      QueryError *status) {
      |                                        ^
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note: candidate: ‘DocTable::DocTable(size_t)’
   88 |   DocTable(size_t cap) { ctor(cap, RSGlobalConfig.maxDocTableSize); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:88:3: note:   candidate expects 1 argument, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note: candidate: ‘DocTable::DocTable(size_t, size_t)’
   87 |   DocTable(size_t cap, size_t max_size) { ctor(cap, max_size); }
      |   ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:87:3: note:   candidate expects 2 arguments, 0 provided
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note: candidate: ‘constexpr DocTable::DocTable(const DocTable&)’
   63 | struct DocTable : Object {
      |        ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/doc_table.h:63:8: note:   candidate expects 1 argument, 0 provided
/home/avital/repositories/RediSearch-cxx/src/spec.c:197:90: error: ‘sp’ was not declared in this scope
  197 |   RedisModuleString *keyString = RedisModule_CreateStringPrintf(ctx, INDEX_SPEC_KEY_FMT, sp->name);
      |                                                                                          ^~
In file included from /usr/include/x86_64-linux-gnu/bits/socket.h:27,
                 from /usr/include/x86_64-linux-gnu/sys/socket.h:33,
                 from /usr/include/netinet/in.h:23,
                 from /usr/include/arpa/inet.h:22,
                 from /home/avital/repositories/RediSearch-cxx/src/buffer.h:10,
                 from /home/avital/repositories/RediSearch-cxx/src/varint.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/byte_offsets.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/doc_table.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.c:212:12: error: returning a value from a constructor
  212 |     return NULL;
      |            ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:219:14: error: ‘struct CursorList’ has no member named ‘AddSpec’
  219 |   RSCursors->AddSpec(name, RSCURSORS_DEFAULT_CAPACITY);
      |              ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:227:17: error: expected type-specifier before ‘Indexer’
  227 |   indexer = new Indexer(this);
      |                 ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In function ‘int parseTextField(FieldSpec*, ArgsCursor*, QueryError*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:276:19: error: ambiguous overload for ‘operator|=’ (operand types are ‘unsigned char’ and ‘FieldSpecOptions’)
  276 |       sp->options |= FieldSpec_NoStemming;
      |       ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:276:19: note: candidate: ‘operator|=(FieldSpecOptions&, int)’ (built-in)
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:12,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/field_spec.h:11:12: note: candidate: ‘FieldSpecOptions operator|=(FieldSpecOptions, int)’
   11 |   inline T operator|=(T a, int b) { \
      |            ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/field_spec.h:58:1: note: in expansion of macro ‘RS_ENUM_BITWISE_HELPER’
   58 | RS_ENUM_BITWISE_HELPER(FieldSpecOptions)
      | ^~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:308:19: error: ambiguous overload for ‘operator|=’ (operand types are ‘unsigned char’ and ‘FieldSpecOptions’)
  308 |       sp->options |= FieldSpec_Phonetics;
      |       ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:308:19: note: candidate: ‘operator|=(FieldSpecOptions&, int)’ (built-in)
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:12,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/field_spec.h:11:12: note: candidate: ‘FieldSpecOptions operator|=(FieldSpecOptions, int)’
   11 |   inline T operator|=(T a, int b) { \
      |            ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/field_spec.h:58:1: note: in expansion of macro ‘RS_ENUM_BITWISE_HELPER’
   58 | RS_ENUM_BITWISE_HELPER(FieldSpecOptions)
      | ^~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In function ‘bool parseFieldSpec(ArgsCursor*, FieldSpec*, QueryError*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:362:19: error: ambiguous overload for ‘operator|=’ (operand types are ‘unsigned char’ and ‘FieldSpecOptions’)
  362 |       sp->options |= FieldSpec_NotIndexable;
      |       ~~~~~~~~~~~~^~~~~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:362:19: note: candidate: ‘operator|=(FieldSpecOptions&, int)’ (built-in)
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.h:12,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/field_spec.h:11:12: note: candidate: ‘FieldSpecOptions operator|=(FieldSpecOptions, int)’
   11 |   inline T operator|=(T a, int b) { \
      |            ^~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/field_spec.h:58:1: note: in expansion of macro ‘RS_ENUM_BITWISE_HELPER’
   58 | RS_ENUM_BITWISE_HELPER(FieldSpecOptions)
      | ^~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘bool IndexSpec::AddFieldsInternal(ArgsCursor*, QueryError*, int)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:410:5: error: ‘IndexSpecCache_Decref’ was not declared in this scope; did you mean ‘IndexSpecCache’?
  410 |     IndexSpecCache_Decref(spcache);
      |     ^~~~~~~~~~~~~~~~~~~~~
      |     IndexSpecCache
/home/avital/repositories/RediSearch-cxx/src/spec.c:432:20: error: ‘sp’ was not declared in this scope
  432 |       int textId = sp->CreateTextId();
      |                    ^~
/home/avital/repositories/RediSearch-cxx/src/spec.c:481:15: error: base operand of ‘->’ has non-pointer type ‘FieldSpec’
  481 |     &fields[i]->Cleanup();
      |               ^~
/home/avital/repositories/RediSearch-cxx/src/spec.c: At global scope:
/home/avital/repositories/RediSearch-cxx/src/spec.c:499:6: error: no declaration matches ‘void IndexSpec::Parse(const char*, const char**, int, QueryError*)’
  499 | void IndexSpec::Parse(const char *name, const char **argv, int argc, QueryError *status) {
      |      ^~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h:224:8: note: candidate is: ‘void IndexSpec::Parse(int, int, int, int)’
  224 |   void Parse(name, argv, argc, status);
      |        ^~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:187:8: note: ‘struct IndexSpec’ defined here
  187 | struct IndexSpec {
      |        ^~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘void IndexSpec::FreeInternals()’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:719:10: error: type ‘struct DocTable’ argument given to ‘delete’, expected pointer
  719 |   delete docs;
      |          ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:724:16: error: ‘struct CursorList’ has no member named ‘PurgeWithName’
  724 |     RSCursors->PurgeWithName(name);
      |                ^~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:725:16: error: ‘struct CursorList’ has no member named ‘RemoveSpec’; did you mean ‘Remove’?
  725 |     RSCursors->RemoveSpec(name);
      |                ^~~~~~~~~~
      |                Remove
/home/avital/repositories/RediSearch-cxx/src/spec.c:733:5: error: ‘StopWordList_Unref’ was not declared in this scope; did you mean ‘StopWordList’?
  733 |     StopWordList_Unref(stopwords);
      |     ^~~~~~~~~~~~~~~~~~
      |     StopWordList
In file included from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘void IndexSpec::FreeAsync()’:
/home/avital/repositories/RediSearch-cxx/src/search_ctx.h:41:25: error: could not convert ‘{threadCtx, 0, ((IndexSpec*)this), 0, 1}’ from ‘<brace-enclosed initializer list>’ to ‘RedisSearchCtx’
   41 |   { ctx, NULL, sp, 0, 1 }
      |                         ^
      |                         |
      |                         <brace-enclosed initializer list>
/home/avital/repositories/RediSearch-cxx/src/spec.c:777:25: note: in expansion of macro ‘SEARCH_CTX_STATIC’
  777 |   RedisSearchCtx sctx = SEARCH_CTX_STATIC(threadCtx, this);
      |                         ^~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In destructor ‘IndexSpec::~IndexSpec()’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:800:54: error: ‘ctx’ was not declared in this scope
  800 |     thpool_add_work(cleanPool, IndexSpec::FreeAsync, ctx);
      |                                                      ^~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:800:43: error: invalid use of non-static member function ‘void IndexSpec::FreeAsync()’
  800 |     thpool_add_work(cleanPool, IndexSpec::FreeAsync, ctx);
      |                                ~~~~~~~~~~~^~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:775:6: note: declared here
  775 | void IndexSpec::FreeAsync() {
      |      ^~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:5,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘void IndexSpec::FreeSync()’:
/home/avital/repositories/RediSearch-cxx/src/search_ctx.h:41:25: error: could not convert ‘{ctx, 0, ((IndexSpec*)this), 0, 1}’ from ‘<brace-enclosed initializer list>’ to ‘RedisSearchCtx’
   41 |   { ctx, NULL, sp, 0, 1 }
      |                         ^
      |                         |
      |                         <brace-enclosed initializer list>
/home/avital/repositories/RediSearch-cxx/src/spec.c:817:25: note: in expansion of macro ‘SEARCH_CTX_STATIC’
  817 |   RedisSearchCtx sctx = SEARCH_CTX_STATIC(ctx, this);
      |                         ^~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘void IndexSpec::LoadEx(RedisModuleCtx*, IndexLoadOptions*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:861:37: error: ‘IndexAlias_Get’ was not declared in this scope; did you mean ‘IndexAlias’?
  861 |     IndexSpec *aliasTarget = this = IndexAlias_Get(ixname);
      |                                     ^~~~~~~~~~~~~~
      |                                     IndexAlias
/home/avital/repositories/RediSearch-cxx/src/spec.c:874:5: error: lvalue required as left operand of assignment
  874 |     this = RedisModule_ModuleTypeGetValue(options->keyp);
      |     ^~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘void IndexSpec::Load(RedisModuleCtx*, const char*, int)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:906:54: error: designator order for field ‘IndexLoadOptions::name’ does not match declaration order in ‘IndexLoadOptions’
  906 |                             .name = {.cstring = name}};
      |                                                      ^
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘RedisModuleString* IndexSpec::GetFormattedKey(const FieldSpec*, FieldType)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:924:64: error: ‘sp’ was not declared in this scope
  924 |     RedisSearchCtx sctx = {.redisCtx = RSDummyContext, .spec = sp};
      |                                                                ^~
/home/avital/repositories/RediSearch-cxx/src/spec.c:924:66: error: could not convert ‘{RSDummyContext, <expression error>}’ from ‘<brace-enclosed initializer list>’ to ‘RedisSearchCtx’
  924 |     RedisSearchCtx sctx = {.redisCtx = RSDummyContext, .spec = sp};
      |                                                                  ^
      |                                                                  |
      |                                                                  <brace-enclosed initializer list>
/home/avital/repositories/RediSearch-cxx/src/spec.c:927:15: error: ‘fmtRedisNumericIndexKey’ was not declared in this scope
  927 |         ret = fmtRedisNumericIndexKey(&sctx, fs->name);
      |               ^~~~~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: At global scope:
/home/avital/repositories/RediSearch-cxx/src/spec.c:991:6: error: no declaration matches ‘bool IndexSpec::ParseStopWords(RedisModuleString**, size_t)’
  991 | bool IndexSpec::ParseStopWords(RedisModuleString **strs, size_t len) {
      |      ^~~~~~~~~
In file included from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/home/avital/repositories/RediSearch-cxx/src/spec.h:284:7: note: candidate is: ‘int IndexSpec::ParseStopWords(RedisModuleString**, size_t)’
  284 |   int ParseStopWords(RedisModuleString **strs, size_t len);
      |       ^~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.h:187:8: note: ‘struct IndexSpec’ defined here
  187 | struct IndexSpec {
      |        ^~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘void IndexSpec::ctor(const char*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1027:35: error: no match for ‘operator=’ (operand types are ‘std::shared_ptr<StopWordList>’ and ‘StopWordList*’)
 1027 |   stopwords = DefaultStopWordList();
      |                                   ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:358:19: note: candidate: ‘std::shared_ptr<_Tp>& std::shared_ptr<_Tp>::operator=(const std::shared_ptr<_Tp>&) [with _Tp = StopWordList]’
  358 |       shared_ptr& operator=(const shared_ptr&) noexcept = default;
      |                   ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:358:29: note:   no known conversion for argument 1 from ‘StopWordList*’ to ‘const std::shared_ptr<StopWordList>&’
  358 |       shared_ptr& operator=(const shared_ptr&) noexcept = default;
      |                             ^~~~~~~~~~~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:362:2: note: candidate: ‘template<class _Yp> std::shared_ptr<_Tp>::_Assignable<const std::shared_ptr<_Yp>&> std::shared_ptr<_Tp>::operator=(const std::shared_ptr<_Yp>&) [with _Yp = _Yp; _Tp = StopWordList]’
  362 |  operator=(const shared_ptr<_Yp>& __r) noexcept
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:362:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1027:35: note:   mismatched types ‘const std::shared_ptr<_Tp>’ and ‘StopWordList*’
 1027 |   stopwords = DefaultStopWordList();
      |                                   ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:373:2: note: candidate: ‘template<class _Yp> std::shared_ptr<_Tp>::_Assignable<std::auto_ptr<_Up> > std::shared_ptr<_Tp>::operator=(std::auto_ptr<_Up>&&) [with _Yp = _Yp; _Tp = StopWordList]’
  373 |  operator=(auto_ptr<_Yp>&& __r)
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:373:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1027:35: note:   mismatched types ‘std::auto_ptr<_Up>’ and ‘StopWordList*’
 1027 |   stopwords = DefaultStopWordList();
      |                                   ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:382:7: note: candidate: ‘std::shared_ptr<_Tp>& std::shared_ptr<_Tp>::operator=(std::shared_ptr<_Tp>&&) [with _Tp = StopWordList]’
  382 |       operator=(shared_ptr&& __r) noexcept
      |       ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:382:30: note:   no known conversion for argument 1 from ‘StopWordList*’ to ‘std::shared_ptr<StopWordList>&&’
  382 |       operator=(shared_ptr&& __r) noexcept
      |                 ~~~~~~~~~~~~~^~~
/usr/include/c++/10/bits/shared_ptr.h:390:2: note: candidate: ‘template<class _Yp> std::shared_ptr<_Tp>::_Assignable<std::shared_ptr<_Yp> > std::shared_ptr<_Tp>::operator=(std::shared_ptr<_Yp>&&) [with _Yp = _Yp; _Tp = StopWordList]’
  390 |  operator=(shared_ptr<_Yp>&& __r) noexcept
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:390:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1027:35: note:   mismatched types ‘std::shared_ptr<_Tp>’ and ‘StopWordList*’
 1027 |   stopwords = DefaultStopWordList();
      |                                   ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:398:2: note: candidate: ‘template<class _Yp, class _Del> std::shared_ptr<_Tp>::_Assignable<std::unique_ptr<_Up, _Ep> > std::shared_ptr<_Tp>::operator=(std::unique_ptr<_Up, _Ep>&&) [with _Yp = _Yp; _Del = _Del; _Tp = StopWordList]’
  398 |  operator=(unique_ptr<_Yp, _Del>&& __r)
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:398:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1027:35: note:   mismatched types ‘std::unique_ptr<_Tp, _Dp>’ and ‘StopWordList*’
 1027 |   stopwords = DefaultStopWordList();
      |                                   ^
/home/avital/repositories/RediSearch-cxx/src/spec.c:1028:11: error: ‘NewTrie’ was not declared in this scope; did you mean ‘Trie’?
 1028 |   terms = NewTrie();
      |           ^~~~~~~
      |           Trie
/home/avital/repositories/RediSearch-cxx/src/spec.c: In function ‘void* IndexSpec_RdbLoad(RedisModuleIO*, int)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1269:12: error: base operand of ‘->’ has non-pointer type ‘DocTable’
 1269 |   &sp->docs->RdbLoad(rdb, encver);
      |            ^~
/home/avital/repositories/RediSearch-cxx/src/spec.c:1274:17: error: ‘NewTrie’ was not declared in this scope; did you mean ‘Trie’?
 1274 |     sp->terms = NewTrie();
      |                 ^~~~~~~
      |                 Trie
/home/avital/repositories/RediSearch-cxx/src/spec.c:1278:21: error: ‘StopWordList_RdbLoad’ was not declared in this scope
 1278 |     sp->stopwords = StopWordList_RdbLoad(rdb, encver);
      |                     ^~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:1280:41: error: no match for ‘operator=’ (operand types are ‘std::shared_ptr<StopWordList>’ and ‘StopWordList*’)
 1280 |     sp->stopwords = DefaultStopWordList();
      |                                         ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:358:19: note: candidate: ‘std::shared_ptr<_Tp>& std::shared_ptr<_Tp>::operator=(const std::shared_ptr<_Tp>&) [with _Tp = StopWordList]’
  358 |       shared_ptr& operator=(const shared_ptr&) noexcept = default;
      |                   ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:358:29: note:   no known conversion for argument 1 from ‘StopWordList*’ to ‘const std::shared_ptr<StopWordList>&’
  358 |       shared_ptr& operator=(const shared_ptr&) noexcept = default;
      |                             ^~~~~~~~~~~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:362:2: note: candidate: ‘template<class _Yp> std::shared_ptr<_Tp>::_Assignable<const std::shared_ptr<_Yp>&> std::shared_ptr<_Tp>::operator=(const std::shared_ptr<_Yp>&) [with _Yp = _Yp; _Tp = StopWordList]’
  362 |  operator=(const shared_ptr<_Yp>& __r) noexcept
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:362:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1280:41: note:   mismatched types ‘const std::shared_ptr<_Tp>’ and ‘StopWordList*’
 1280 |     sp->stopwords = DefaultStopWordList();
      |                                         ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:373:2: note: candidate: ‘template<class _Yp> std::shared_ptr<_Tp>::_Assignable<std::auto_ptr<_Up> > std::shared_ptr<_Tp>::operator=(std::auto_ptr<_Up>&&) [with _Yp = _Yp; _Tp = StopWordList]’
  373 |  operator=(auto_ptr<_Yp>&& __r)
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:373:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1280:41: note:   mismatched types ‘std::auto_ptr<_Up>’ and ‘StopWordList*’
 1280 |     sp->stopwords = DefaultStopWordList();
      |                                         ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:382:7: note: candidate: ‘std::shared_ptr<_Tp>& std::shared_ptr<_Tp>::operator=(std::shared_ptr<_Tp>&&) [with _Tp = StopWordList]’
  382 |       operator=(shared_ptr&& __r) noexcept
      |       ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:382:30: note:   no known conversion for argument 1 from ‘StopWordList*’ to ‘std::shared_ptr<StopWordList>&&’
  382 |       operator=(shared_ptr&& __r) noexcept
      |                 ~~~~~~~~~~~~~^~~
/usr/include/c++/10/bits/shared_ptr.h:390:2: note: candidate: ‘template<class _Yp> std::shared_ptr<_Tp>::_Assignable<std::shared_ptr<_Yp> > std::shared_ptr<_Tp>::operator=(std::shared_ptr<_Yp>&&) [with _Yp = _Yp; _Tp = StopWordList]’
  390 |  operator=(shared_ptr<_Yp>&& __r) noexcept
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:390:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1280:41: note:   mismatched types ‘std::shared_ptr<_Tp>’ and ‘StopWordList*’
 1280 |     sp->stopwords = DefaultStopWordList();
      |                                         ^
In file included from /usr/include/c++/10/memory:84,
                 from /home/avital/repositories/RediSearch-cxx/src/object.h:7,
                 from /home/avital/repositories/RediSearch-cxx/src/gc.h:6,
                 from /home/avital/repositories/RediSearch-cxx/src/default_gc.h:4,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.h:3,
                 from /home/avital/repositories/RediSearch-cxx/src/spec.c:2:
/usr/include/c++/10/bits/shared_ptr.h:398:2: note: candidate: ‘template<class _Yp, class _Del> std::shared_ptr<_Tp>::_Assignable<std::unique_ptr<_Up, _Ep> > std::shared_ptr<_Tp>::operator=(std::unique_ptr<_Up, _Ep>&&) [with _Yp = _Yp; _Del = _Del; _Tp = StopWordList]’
  398 |  operator=(unique_ptr<_Yp, _Del>&& __r)
      |  ^~~~~~~~
/usr/include/c++/10/bits/shared_ptr.h:398:2: note:   template argument deduction/substitution failed:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1280:41: note:   mismatched types ‘std::unique_ptr<_Tp, _Dp>’ and ‘StopWordList*’
 1280 |     sp->stopwords = DefaultStopWordList();
      |                                         ^
/home/avital/repositories/RediSearch-cxx/src/spec.c:1287:14: error: ‘struct CursorList’ has no member named ‘AddSpec’
 1287 |   RSCursors->AddSpec(sp->name, RSCURSORS_DEFAULT_CAPACITY);
      |              ^~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:1309:49: error: cannot call member function ‘int IndexAlias::Add(const char*, IndexSpec*, int, QueryError*)’ without object
 1309 |       int rc = IndexAlias::Add(s, sp, 0, &status);
      |                                                 ^
/home/avital/repositories/RediSearch-cxx/src/spec.c: In function ‘void IndexSpec_RdbSave(RedisModuleIO*, void*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1339:5: error: ‘StopWordList_RdbSave’ was not declared in this scope
 1339 |     StopWordList_RdbSave(rdb, sp->stopwords);
      |     ^~~~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c:1343:5: error: ‘SynonymMap_RdbSave’ was not declared in this scope
 1343 |     SynonymMap_RdbSave(rdb, sp->smap);
      |     ^~~~~~~~~~~~~~~~~~
/home/avital/repositories/RediSearch-cxx/src/spec.c: In function ‘int IndexSpec_RegisterType(RedisModuleCtx*)’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1369:40: error: ‘IndexSpec_Free’ was not declared in this scope; did you mean ‘IndexSpecType’?
 1369 |                                .free = IndexSpec_Free};
      |                                        ^~~~~~~~~~~~~~
      |                                        IndexSpecType
/home/avital/repositories/RediSearch-cxx/src/spec.c: In member function ‘void IndexSpec::ClearAliases()’:
/home/avital/repositories/RediSearch-cxx/src/spec.c:1389:66: error: cannot call member function ‘int IndexAlias::Del(const char*, IndexSpec*, int, QueryError*)’ without object
 1389 |     int rc = IndexAlias::Del(*pp, this, INDEXALIAS_NO_BACKREF, &e);
      |                                                                  ^
make[2]: *** [CMakeFiles/rscore.dir/build.make:1364: CMakeFiles/rscore.dir/src/spec.o] Error 1
make[1]: *** [Makefile:2327: src/spec.o] Error 2
make: *** [Makefile:353: /home/avital/repositories/RediSearch-cxx/bin/linux-x64-release/search/redisearch.so] Error 2
